<html>
<head>
    <title>HeatMap Table</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.4.0/codemirror.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js" /></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.4.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.4.0/mode/javascript/javascript.min.js"></script>
    
    <link rel="stylesheet" href="../dist/heatmap-table.css">
    <script type="text/javascript" src="../dist/heatmap-table-vendor.js"></script>
    <script type="text/javascript" src="../dist/heatmap-table.js"></script>
</head>

<body>
  <div class="container col-md-11 col-xs-12" style="margin-left:5%">
<div class="jumbotron">
    <p class="pull-right" style="display: inline-block;">
      <a href="http://www.nextprot.org" alt="neXtProt" style="color:#C50063;">neXtProt</a>
    </p>

    <h1>HeatMap Table</h1>
    <a target="_blank" href="https://github.com/calipho-sib/protein-expression/edit/master/doc/index.html" class="btn btn-info pull-right">Improve this doc</a>

    <p>This heatmap table shows ... </p>
</div>
  <div class="panel panel-default col-lg-12 col-md-12">
    <div class="row panel-heading">
        <h4 class="text-center">Simple</h4>
    </div>
    <div id="heatmap-table" style="width:800px;margin: 20px auto 50px auto; height:auto;">
    </div>
    <div class="panel-body pull-left" style="width:50%;">
        <p>This is the classic display of a heatmap.<br>
            ... options :</p>
        <ul>
            <li><strong>header</strong> <em>(array)</em> : Show the columns header</li>
            <li><strong>tableID</strong> <em>(string)</em> : The id of the HTML element</li>
            <li><strong>options</strong> <em>(object)</em> : The option of the heatMap table
              <ul>
                <li><strong>headerGroups</strong> <em>(array)</em> : Grouping the headers</li>
                <li><strong>valuesColorMapping</strong> <em>(array)</em> : Set the color of values</li>
                <li><strong>columnWidth</strong> <em>(string)</em> : Set the width of columns, "70px" by default</li>
              </ul>
            </li>
        </ul>
    </div>
    <form class="pull-right" style="width:50%;">
        <textarea id="code1" name="code1" style="max-height:200px;overflow:auto;font-size:11px;">
var heatmapTableOptions = {
    headerGroups:[ 
        {groupName: 'mRNAExpression', holdColumns: 2},
        {groupName: 'ProteinExpression', holdColumns: 1}
    ],
    valuesColorMapping: [
        { value: 'Positive', color: '#FFA10A'},
        { value: 'NotDetected', color: 'lightgray'},
        { value: 'Weak', color: '#FFE6BD'},
        { value: 'Low', color: '#FFE6BD'},
        { value: 'Strong', color: 'greenBG'},
        { value: 'Moderate', color: '#FFC870'},
        { value: 'Medium', color: '#FFC870'}

    ],
    columnWidth: "120px",
}

var heatMapTable = new HeatMapTable({
  header:['MANotDetected','MAPositive','ESTPositive'],
                tableID: "heatmap-table",
                options: heatmapTableOptions
            });
            

var data = {
  "data": [
    {
      "rowLabel": "Human anatomical entity",
      "linkLabel": "[TS-2178]",
      "linkURL": "http://www.nextprot.org/db/term/TS-2178", 
      "values": ["NotDetected", "Positive", "Positive"],
      "children": [
        {
          "rowLabel": "Fluid and secretion",
          "linkLabel": "[TS-2101]",
          "linkURL": "http://www.nextprot.org/db/term/TS-2101",
// the last one will be ignore, because there are only three columns
          "values": ["NotDetected", "Positive", "Positive"],
          "children": [ 
            {
              "linkLabel": "[TS-0079]", 
              "linkURL": "http://www.nextprot.org/db/term/TS-0079", 
              "rowLabel": "Blood", 
              "values": ["", "Positive", "Positive"],
              "children": []
            }
          ]
        }
      ], 
    }
  ]
}

        
heatMapTable.loadJSONData(data);
heatMapTable.show(); 
  
  </textarea>
          <button type="button" class="btn btn-default center-block" style="margin-bottom:20px;"
              onclick=executeCode("#protein-sequence-viewer2",simpleHeatMap)>Execute
      </button>
      </form>
  </div>

</div>


     </div>
 <a href="https://github.com/calipho-sib/protein-expression"  target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;"
                                                                                src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67"
                                                                                alt="Fork me on GitHub"
                                                                                data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
  <script defer>
      var simpleHeatMap;
      var executeCode = function (outputDiv, mirrorCode) {
          $("#heatmap-table").empty();
          var code = mirrorCode.getValue();
          eval(code);
          $(outputDiv).animate({opacity: "100"}, 2000);
      };
      window.onload = function () {
          simpleHeatMap = CodeMirror.fromTextArea(code1, {
              mode: "javascript",
              lineNumbers: true,
              lineWrapping: true
          });
          $(function () {
            executeCode("#heatmap-table", simpleHeatMap);
          });
      };
  </script>

</body>


</html>
